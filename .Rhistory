x = 39, xend = 39,
y = 39, yend = 5.8,
color = "#21918c",
linewidth = .5,
linetype = "dashed") +
geom_rect(aes(xmin = 27, xmax = 37,
ymin = 38, ymax = 44 ),
fill = "#21918c",
alpha = 0.008) +
annotate("text", x = 32, y = 41,
label = "Quarantine Begins\n (March 2020)",
size = 2) +
geom_point(aes(x = 54, y = 40),
show.legend = FALSE,
color = "#5ec962",
shape = 6) +
annotate("segment", x = 54, xend = 54,
y = 39, yend = 4.3,
color = "#5ec962",
linewidth = .5,
linetype = "dashed") +
geom_rect(aes(xmin = 56, xmax = 66,
ymin = 38, ymax = 44 ),
fill = "#5ec962",
alpha = 0.008) +
annotate("text", x = 61, y = 41,
label = "Quarantine Ends\n (June 2021)",
size = 2)
# FIRST GRAPH
library(ggplot2)
ggplot(avgAll,aes(x = month, y = avg_pm2.5, fill = year)) +
geom_col(width = .7, show.legend = FALSE) +
scale_fill_viridis_d() +
scale_x_continuous(breaks = c(1, 13, 25, 37, 49, 61, 73, 84),
labels = c("1" = "2017", "13" = "2018", "25" = "2019", "37" = "2020", "49" = "2021", "61" = "2022", "73" = "2023", "84" = "2024")) +
theme_linedraw() +
labs(title = "Concentration of Airborne Fine Particles (PM2.5) in Portland, OR",
subtitle = "Data sourced from the EPA ranging from 2017 to 2023",
x = "Year",
y = "Average PM2.5 Concentration (µg/m³)") +
guides(color = "none") +
theme(axis.title.y = element_text(size = 10,
margin = margin(r = 20)),
axis.title.x = element_text(size = 10,
margin = margin(t = 15))) +
geom_point(aes(x = 39, y = 40),
show.legend = FALSE,
color = "#21918c",
shape = 6) +
annotate("segment",
x = 39, xend = 39,
y = 39, yend = 5.8,
color = "#21918c",
linewidth = .5,
linetype = "dashed") +
geom_rect(aes(xmin = 27, xmax = 37,
ymin = 38, ymax = 44 ),
fill = "#21918c",
alpha = 0.008) +
annotate("text", x = 32, y = 41,
label = "Quarantine Begins\n (March 2020)",
size = 2) +
geom_point(aes(x = 54, y = 40),
show.legend = FALSE,
color = "#5ec962",
shape = 6) +
annotate("segment", x = 54, xend = 54,
y = 39, yend = 4.3,
color = "#5ec962",
linewidth = .5,
linetype = "dashed") +
geom_rect(aes(xmin = 56, xmax = 66,
ymin = 38, ymax = 44 ),
fill = "#5ec962",
alpha = 0.008) +
annotate("text", x = 61, y = 41,
label = "Quarantine Ends\n (June 2021)",
size = 2)
glimpse(avgAll)
avgAll <- read_csv("data/air_pollutants/avgAll.csv")
# FIRST GRAPH
library(tidyverse)
library(lubridate)
library(dplyr)
library(readr)
library(reshape2)
library(viridis)
library(cowplot)
avgAll <- read_csv("data/air_pollutants/avgAll.csv")
avgAll2020 <- read_csv("data/air_pollutants/avgAll2020.csv")
avgAll$year <- as.character(avgAll$year)
avgAll2020$year <- as.character(avgAll2020$year)
fires_full <- read_csv("data/air_pollutants/fires_full.csv")
pollutants_pdx <- read_csv("data/air_pollutants/pollutants_pdx.csv",
col_types = cols(Source = col_skip(),
`Site ID` = col_skip(), POC = col_skip(),
`Site Name` = col_skip(), DAILY_OBS_COUNT = col_skip(),
PERCENT_COMPLETE = col_skip(), AQS_PARAMETER_CODE = col_skip(),
CBSA_CODE = col_skip(), CBSA_NAME = col_skip(),
STATE_CODE = col_skip(), STATE = col_skip(),
COUNTY_CODE = col_skip(), COUNTY = col_skip(),
SITE_LATITUDE = col_skip(), SITE_LONGITUDE = col_skip()))
```
glimpse(avgAll)
ggplot(avgAll,aes(x = month, y = avg_pm2.5, fill = year)) +
geom_col(width = .7, show.legend = FALSE) +
scale_fill_viridis_d() +
scale_x_continuous(breaks = c(1, 13, 25, 37, 49, 61, 73, 84),
labels = c("1" = "2017", "13" = "2018", "25" = "2019", "37" = "2020", "49" = "2021", "61" = "2022", "73" = "2023", "84" = "2024")) +
theme_linedraw() +
labs(title = "Concentration of Airborne Fine Particles (PM2.5) in Portland, OR",
subtitle = "Data sourced from the EPA ranging from 2017 to 2023",
x = "Year",
y = "Average PM2.5 Concentration (µg/m³)") +
guides(color = "none") +
theme(axis.title.y = element_text(size = 10,
margin = margin(r = 20)),
axis.title.x = element_text(size = 10,
margin = margin(t = 15))) +
geom_point(aes(x = 39, y = 40),
show.legend = FALSE,
color = "#21918c",
shape = 6) +
annotate("segment",
x = 39, xend = 39,
y = 39, yend = 5.8,
color = "#21918c",
linewidth = .5,
linetype = "dashed") +
geom_rect(aes(xmin = 27, xmax = 37,
ymin = 38, ymax = 44 ),
fill = "#21918c",
alpha = 0.008) +
annotate("text", x = 32, y = 41,
label = "Quarantine Begins\n (March 2020)",
size = 2) +
geom_point(aes(x = 54, y = 40),
show.legend = FALSE,
color = "#5ec962",
shape = 6) +
annotate("segment", x = 54, xend = 54,
y = 39, yend = 4.3,
color = "#5ec962",
linewidth = .5,
linetype = "dashed") +
geom_rect(aes(xmin = 56, xmax = 66,
ymin = 38, ymax = 44 ),
fill = "#5ec962",
alpha = 0.008) +
annotate("text", x = 61, y = 41,
label = "Quarantine Ends\n (June 2021)",
size = 2)
avgAll2020_melted <- melt(avgAll2020, id.vars = c("year", "monthbyyear"))
avgAll2019 <- avgAll %>%
filter(year == 2019) %>%
select(year, monthbyyear, avg_pm2.5, avg_so2, avg_ozone, avg_co, avg_no2)
avgAll2019_melted <- melt(avgAll2019, id.vars = c("year", "monthbyyear"))
avgAll2021 <- avgAll %>%
filter(year == 2021) %>%
select(year, monthbyyear, avg_pm2.5, avg_so2, avg_ozone, avg_co, avg_no2)
avgAll2021_melted <- melt(avgAll2021, id.vars = c("year", "monthbyyear"))
avgAll2019_melted <- avgAll2019_melted %>%
mutate(variable = case_when(
variable == "avg_pm2.5" ~ "Particulate Matter (PM2.5)",
variable == "avg_so2" ~ "Sulfur Dioxide (SO2)",
variable == "avg_no2" ~ "Nitrogen Dioxide (NO2)",
variable == "avg_ozone" ~ "Ozone",
variable == "avg_co" ~ "Carbon Monoxide (CO)",
))
avgAll2020_melted <- avgAll2020_melted %>%
mutate(variable = case_when(
variable == "avg_pm2.5" ~ "Particulate Matter (PM2.5)",
variable == "avg_so2" ~ "Sulfur Dioxide (SO2)",
variable == "avg_no2" ~ "Nitrogen Dioxide (NO2)",
variable == "avg_ozone" ~ "Ozone",
variable == "avg_co" ~ "Carbon Monoxide (CO)",
))
avgAll2021_melted <- avgAll2021_melted %>%
mutate(variable = case_when(
variable == "avg_pm2.5" ~ "Particulate Matter (PM2.5)",
variable == "avg_so2" ~ "Sulfur Dioxide (SO2)",
variable == "avg_no2" ~ "Nitrogen Dioxide (NO2)",
variable == "avg_ozone" ~ "Ozone",
variable == "avg_co" ~ "Carbon Monoxide (CO)",
))
## Question 1: Pollutants in 2019
ggplot(avgAll2019_melted , aes(x = monthbyyear, y = value, fill = variable)) +
geom_col() +
facet_wrap(variable ~ ., scales = "free_y") +
geom_smooth()+
scale_x_continuous(breaks = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12),
labels = c("1" = "Jan", "2" = "Feb", "3" = "Mar", "4" = "Apr", "5" = "May", "6" = "Jun", "7" = "Jul", "8" = "Aug", "9" = "Sep", "10" = "Oct", "11" = "Nov", "12" = "Dec")) +
theme(axis.text.x = element_text(angle = 45, hjust = 1, size=5)) +
scale_fill_viridis_d() +
theme_linedraw() +
theme(panel.grid = element_blank()) +
labs(x = "",
title = "Concentration Trends by Pollutant in 2019",
fill = "Pollutant",
subtitle = "Data sourced from the EPA",
y = "Concentration by Pollutant") +
theme(axis.text.x = element_blank(), # REMOVES X-LABELS
# CHANGE MY LEGEND BORDER COLOR AND LINE THICKNESS
legend.box.background = element_rect(color = "black", size = 1),
legend.box.margin = margin(6, 6, 6, 6),
# CHANGE THE POSITION OF THE LEGEND
legend.position = c(.85, .2),
legend.text = element_text(color = "black", size = 7),  # Legend text color and size
legend.title = element_text(color = "black"),           # Legend title color
legend.key.size = unit(0.4, "cm")
)
# libraries
library(tidyverse)
library(lubridate)
library(dplyr)
library(readr)
library(reshape2)
library(viridis)
library(cowplot)
# FIRST GRAPH
ggplot(avgAll,aes(x = month, y = avg_pm2.5, fill = year)) +
geom_col(width = .7, show.legend = FALSE) +
scale_fill_viridis_d() +
scale_x_continuous(breaks = c(1, 13, 25, 37, 49, 61, 73, 84),
labels = c("1" = "2017", "13" = "2018", "25" = "2019", "37" = "2020", "49" = "2021", "61" = "2022", "73" = "2023", "84" = "2024")) +
theme_linedraw() +
labs(title = "Concentration of Airborne Fine Particles (PM2.5) in Portland, OR",
subtitle = "Data sourced from the EPA ranging from 2017 to 2023",
x = "Year",
y = "Average PM2.5 Concentration (µg/m³)") +
guides(color = "none") +
theme(axis.title.y = element_text(size = 10,
margin = margin(r = 20)),
axis.title.x = element_text(size = 10,
margin = margin(t = 15))) +
geom_point(aes(x = 39, y = 40),
show.legend = FALSE,
color = "#21918c",
shape = 6) +
annotate("segment",
x = 39, xend = 39,
y = 39, yend = 5.8,
color = "#21918c",
linewidth = .5,
linetype = "dashed") +
geom_rect(aes(xmin = 27, xmax = 37,
ymin = 38, ymax = 44 ),
fill = "#21918c",
alpha = 0.008) +
annotate("text", x = 32, y = 41,
label = "Quarantine Begins\n (March 2020)",
size = 2) +
geom_point(aes(x = 54, y = 40),
show.legend = FALSE,
color = "#5ec962",
shape = 6) +
annotate("segment", x = 54, xend = 54,
y = 39, yend = 4.3,
color = "#5ec962",
linewidth = .5,
linetype = "dashed") +
geom_rect(aes(xmin = 56, xmax = 66,
ymin = 38, ymax = 44 ),
fill = "#5ec962",
alpha = 0.008) +
annotate("text", x = 61, y = 41,
label = "Quarantine Ends\n (June 2021)",
size = 2)
avgAll2020_melted <- melt(avgAll2020, id.vars = c("year", "monthbyyear"))
avgAll2019 <- avgAll %>%
filter(year == 2019) %>%
select(year, monthbyyear, avg_pm2.5, avg_so2, avg_ozone, avg_co, avg_no2)
avgAll2019_melted <- melt(avgAll2019, id.vars = c("year", "monthbyyear"))
avgAll2021 <- avgAll %>%
filter(year == 2021) %>%
select(year, monthbyyear, avg_pm2.5, avg_so2, avg_ozone, avg_co, avg_no2)
avgAll2021_melted <- melt(avgAll2021, id.vars = c("year", "monthbyyear"))
avgAll2019_melted <- avgAll2019_melted %>%
mutate(variable = case_when(
variable == "avg_pm2.5" ~ "Particulate Matter (PM2.5)",
variable == "avg_so2" ~ "Sulfur Dioxide (SO2)",
variable == "avg_no2" ~ "Nitrogen Dioxide (NO2)",
variable == "avg_ozone" ~ "Ozone",
variable == "avg_co" ~ "Carbon Monoxide (CO)",
))
avgAll2020_melted <- avgAll2020_melted %>%
mutate(variable = case_when(
variable == "avg_pm2.5" ~ "Particulate Matter (PM2.5)",
variable == "avg_so2" ~ "Sulfur Dioxide (SO2)",
variable == "avg_no2" ~ "Nitrogen Dioxide (NO2)",
variable == "avg_ozone" ~ "Ozone",
variable == "avg_co" ~ "Carbon Monoxide (CO)",
))
avgAll2021_melted <- avgAll2021_melted %>%
mutate(variable = case_when(
variable == "avg_pm2.5" ~ "Particulate Matter (PM2.5)",
variable == "avg_so2" ~ "Sulfur Dioxide (SO2)",
variable == "avg_no2" ~ "Nitrogen Dioxide (NO2)",
variable == "avg_ozone" ~ "Ozone",
variable == "avg_co" ~ "Carbon Monoxide (CO)",
))
ggplot(avgAll2019_melted , aes(x = monthbyyear, y = value, fill = variable)) +
geom_col() +
facet_wrap(variable ~ ., scales = "free_y") +
geom_smooth()+
scale_x_continuous(breaks = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12),
labels = c("1" = "Jan", "2" = "Feb", "3" = "Mar", "4" = "Apr", "5" = "May", "6" = "Jun", "7" = "Jul", "8" = "Aug", "9" = "Sep", "10" = "Oct", "11" = "Nov", "12" = "Dec")) +
theme(axis.text.x = element_text(angle = 45, hjust = 1, size=5)) +
scale_fill_viridis_d() +
theme_linedraw() +
theme(panel.grid = element_blank()) +
labs(x = "",
title = "Concentration Trends by Pollutant in 2019",
fill = "Pollutant",
subtitle = "Data sourced from the EPA",
y = "Concentration by Pollutant") +
theme(axis.text.x = element_blank(), # REMOVES X-LABELS
# CHANGE MY LEGEND BORDER COLOR AND LINE THICKNESS
legend.box.background = element_rect(color = "black", size = 1),
legend.box.margin = margin(6, 6, 6, 6),
# CHANGE THE POSITION OF THE LEGEND
legend.position = c(.85, .2),
legend.text = element_text(color = "black", size = 7),  # Legend text color and size
legend.title = element_text(color = "black"),           # Legend title color
legend.key.size = unit(0.4, "cm")
)
# FIRST GRAPH
ggplot(avgAll,aes(x = month, y = avg_pm2.5, fill = year)) +
geom_col(width = .7, show.legend = FALSE) +
scale_fill_viridis_d() +
scale_x_continuous(breaks = c(1, 13, 25, 37, 49, 61, 73, 84),
labels = c("1" = "2017", "13" = "2018", "25" = "2019", "37" = "2020", "49" = "2021", "61" = "2022", "73" = "2023", "84" = "2024")) +
theme_linedraw() +
labs(title = "Concentration of Airborne Fine Particles (PM2.5) in Portland, OR",
subtitle = "Data sourced from the EPA ranging from 2017 to 2023",
x = "Year",
y = "Average PM2.5 Concentration (µg/m³)") +
guides(color = "none") +
theme(axis.title.y = element_text(size = 10,
margin = margin(r = 20)),
axis.title.x = element_text(size = 10,
margin = margin(t = 15))) +
geom_point(aes(x = 39, y = 40),
show.legend = FALSE,
color = "#21918c",
shape = 6) +
annotate("segment",
x = 39, xend = 39,
y = 39, yend = 5.8,
color = "#21918c",
linewidth = .5,
linetype = "dashed") +
geom_rect(aes(xmin = 27, xmax = 37,
ymin = 38, ymax = 44 ),
fill = "#21918c",
alpha = 0.008) +
annotate("text", x = 32, y = 41,
label = "Quarantine Begins\n (March 2020)",
size = 2) +
geom_point(aes(x = 54, y = 40),
show.legend = FALSE,
color = "#5ec962",
shape = 6) +
annotate("segment", x = 54, xend = 54,
y = 39, yend = 4.3,
color = "#5ec962",
linewidth = .5,
linetype = "dashed") +
geom_rect(aes(xmin = 56, xmax = 66,
ymin = 38, ymax = 44 ),
fill = "#5ec962",
alpha = 0.008) +
annotate("text", x = 61, y = 41,
label = "Quarantine Ends\n (June 2021)",
size = 2)
View(avgAll)
# FIRST GRAPH
ggplot(avgAll,aes(x = month, y = avg_pm2.5, fill = year)) +
geom_col(width = .7, show.legend = FALSE) +
scale_fill_viridis_d() +
scale_x_continuous(breaks = c(1, 13, 25, 37, 49, 61, 73, 84),
labels = c("1" = "2017", "13" = "2018", "25" = "2019", "37" = "2020", "49" = "2021", "61" = "2022", "73" = "2023", "84" = "2024")) +
theme_linedraw() +
labs(title = "Concentration of Airborne Fine Particles (PM2.5) in Portland, OR",
subtitle = "Data sourced from the EPA ranging from 2017 to 2023",
x = "Year",
y = "Average PM2.5 Concentration (µg/m³)") +
guides(color = "none") +
theme(axis.title.y = element_text(size = 10,
margin = margin(r = 20)),
axis.title.x = element_text(size = 10,
margin = margin(t = 15))) +
geom_point(aes(x = 39, y = 40),
show.legend = FALSE,
color = "#21918c",
shape = 6) +
annotate("segment",
x = 39, xend = 39,
y = 39, yend = 5.8,
color = "#21918c",
linewidth = .5,
linetype = "dashed") +
geom_rect(aes(xmin = 27, xmax = 37,
ymin = 38, ymax = 44 ),
fill = "#21918c",
alpha = 0.008) +
annotate("text", x = 32, y = 41,
label = "Quarantine Begins\n (March 2020)",
size = 2) +
geom_point(aes(x = 54, y = 40),
show.legend = FALSE,
color = "#5ec962",
shape = 6) +
annotate("segment", x = 54, xend = 54,
y = 39, yend = 4.3,
color = "#5ec962",
linewidth = .5,
linetype = "dashed") +
geom_rect(aes(xmin = 56, xmax = 66,
ymin = 38, ymax = 44 ),
fill = "#5ec962",
alpha = 0.008) +
annotate("text", x = 61, y = 41,
label = "Quarantine Ends\n (June 2021)",
size = 2)
# FIRST GRAPH
ggplot(avgAll,aes(x = month, y = avg_pm2.5, fill = year)) +
geom_col(width = .7, show.legend = FALSE) +
scale_fill_viridis_d() +
scale_x_continuous(breaks = c(1, 13, 25, 37, 49, 61, 73, 84),
labels = c("1" = "2017", "13" = "2018", "25" = "2019", "37" = "2020", "49" = "2021", "61" = "2022", "73" = "2023", "84" = "2024")) +
theme_linedraw() +
labs(title = "Concentration of Airborne Fine Particles (PM2.5) in Portland, OR",
subtitle = "Data sourced from the EPA ranging from 2017 to 2023",
x = "Year",
y = "Average PM2.5 Concentration (µg/m³)") +
guides(color = "none") +
theme(axis.title.y = element_text(size = 10,
margin = margin(r = 20)),
axis.title.x = element_text(size = 10,
margin = margin(t = 15))) +
geom_point(aes(x = 39, y = 40),
show.legend = FALSE,
color = "#21918c",
shape = 6) +
annotate("segment",
x = 39, xend = 39,
y = 39, yend = 5.8,
color = "#21918c",
linewidth = .5,
linetype = "dashed") +
geom_rect(aes(xmin = 27, xmax = 37,
ymin = 38, ymax = 44 ),
fill = "#21918c",
alpha = 0.008) +
annotate("text", x = 32, y = 41,
label = "Quarantine Begins\n (March 2020)",
size = 2) +
geom_point(aes(x = 54, y = 40),
show.legend = FALSE,
color = "#5ec962",
shape = 6) +
annotate("segment", x = 54, xend = 54,
y = 39, yend = 4.3,
color = "#5ec962",
linewidth = .5,
linetype = "dashed") +
geom_rect(aes(xmin = 56, xmax = 66,
ymin = 38, ymax = 44 ),
fill = "#5ec962",
alpha = 0.008) +
annotate("text", x = 61, y = 41,
label = "Quarantine Ends\n (June 2021)",
size = 2)
library(readr)
library(dplyr)
pm25 <- read_csv("data/proposal_data/pm25.csv")
avgpm25 <- read_csv("data/proposal_data/avgpm25.csv")
avgAll <- read_csv("data/air_pollutants/avgAll.csv")
# libraries
library(tidyverse)
library(lubridate)
library(dplyr)
library(readr)
library(reshape2)
library(viridis)
library(cowplot)
avgAll <- read_csv("data/air_pollutants/avgAll.csv")
avgAll2020 <- read_csv("data/air_pollutants/avgAll2020.csv")
avgAll$year <- as.character(avgAll$year)
avgAll2020$year <- as.character(avgAll2020$year)
fires_full <- read_csv("data/air_pollutants/fires_full.csv")
pollutants_pdx <- read_csv("data/air_pollutants/pollutants_pdx.csv",
col_types = cols(Source = col_skip(),
`Site ID` = col_skip(), POC = col_skip(),
`Site Name` = col_skip(), DAILY_OBS_COUNT = col_skip(),
PERCENT_COMPLETE = col_skip(), AQS_PARAMETER_CODE = col_skip(),
CBSA_CODE = col_skip(), CBSA_NAME = col_skip(),
STATE_CODE = col_skip(), STATE = col_skip(),
COUNTY_CODE = col_skip(), COUNTY = col_skip(),
SITE_LATITUDE = col_skip(), SITE_LONGITUDE = col_skip()))
#graphing fires
#considering changing severity of fire seasons over years
ggplot(data = fires_full, aes(x=ReportDate, y = tot_ProAcres)) +
geom_line()
fires_full <- fires_full %>%
mutate(year = year(ReportDate))
ggplot(data = fires_full, aes(x=ReportDate, y = tot_ProAcres)) +
geom_line() +
facet_wrap(~year, scales = "free_x") +
theme(axis.text.x = element_text(angle = 45, hjust = 1, size=5))
![](code/Prerendered Pictures/wildfireAll.svg)
