---
title: "Examining Air Pollution and Environmental Factors"
subtitle: "Kiana Fields, Julian Jacklin, Prasiddhi Thapaliya, Omar Youssif"
format: revealjs
highlight-style: a11y
execute:
  code-link: true
  echo: true
editor_options:
  chunk_output_type: console
css: |
  body {
    font-size: 12px;
---

## Introducing the Data {.smaller}

###### From the EPA (Environmental Protection Agency): conc. levels of major pollutants (CO, NO2, O3, PM 2.5, and SO2)

-   Focusing on the Portland-Hillsboro-Vancouver area from 2017-2023.

-   Subsets into two forms for each pollutant type:

    -   84 x 2 monthly average air pollutant

    -   28606 x 4 daily air pollutant data.

-   10 datasets (5 of each type). Below is a glimpse into one of our datasets; this records the average concentration of each pollutant monthly for the years 2017-2023.

```{r, echo = FALSE}
library(readr)
library(dplyr)
library(tidyverse)
library(lubridate)
library(reshape2)
library(viridis)
avgAll <- read_csv("data/air_pollutants/avgAll.csv")
glimpse(avgAll)

```

## Question 1

###### How did the COVID pandemic lockdown impact air quality in the Portland Metropolitan area? {.smaller}

-   Relevant question that experts are asking right now

-   Looked at a timespan of 7 years to get a sense of AQI before/during/after lockdown

    -   Highlighted 2020-2021 as prime lockdown years

    -   Used our monthly average subsets to see a change over time

-   Cars emit CO and NO2; paid special attention to these compounds

## Question 1 Contd

```{r, echo = F, eval = T}
ggplot(avgAll,aes(x =month, y = avg_pm2.5, fill=year)) +
  geom_col(width=.7, show.legend = FALSE) +
  scale_fill_viridis_c() +
  scale_x_continuous(breaks = c(1, 13, 25, 37, 49,61,73, 84), 
                     labels = c("1"="2017","13"="2018","25"="2019","37"="2020","49"="2021","61"="2022","73"="2023","84"="2024"))+
  theme_linedraw()+
  labs(title = "Concentration of Airborne Fine Particles(PM2.5) in Portland, OR",
       subtitle="From 2017 to 2024",
       x = "Year",
       y = "Average PM2.5 Concentration(µg/m³)") +
  guides(color = "none")+
  theme(axis.title.y = element_text(size=10,
                                    margin=margin(r=20)), 
        axis.title.x = element_text(size=10,
                                    margin=margin(t=15))) +
  geom_point(aes(x=39,y=40), 
             show.legend = FALSE, 
             color="#21918c", 
             shape=6)+
  annotate("segment", x = 39, xend = 39, y = 39, yend = 5.8, color = "#21918c", linewidth = .5, linetype="dashed") +
  geom_rect(aes(xmin=27, xmax=37, ymin=38, ymax=44 ), 
            fill="#21918c", 
            alpha=0.008)+
  annotate("text", 
           x = 32, 
           y = 41, 
           label = "Quarantine Begins\n (March 2020)", 
           size=2)+
  geom_point(aes(x=54,y=40), 
             show.legend = FALSE, 
             color="#5ec962", 
             shape=6)+
  annotate("segment", x = 54, xend = 54, y = 39, yend = 4.3, color = "#5ec962", linewidth = .5, linetype="dashed") +
  geom_rect(aes(xmin=56, 
                xmax=66, 
                ymin=38, 
                ymax=44 ), 
            fill="#5ec962", 
            alpha=0.008)+
  annotate("text", x = 61, y = 41, 
           label = "Quarantine Ends\n (June 2021)", size=2)
   
```

## Question 1 Contd

## Question 1: Discussion

-   General trend: PM2.5 increases in winter, decreases in summer

-   Warm air rises, along with the particles

    -   Exception: 2020 late summer (stay tuned for explanation!)

-   Overall, somewhat decrease during COVID years, would need additional analysis to confirm trends



## Question 2

###### Is there a relationship between wildfire season and air pollutant concentrations? {.smaller}

-   Interested in potential environmental impacts (GHG levels) and adverse health effects

-   Looked at a timespan of 7 years to get a sense of AQI before/during/after lockdown

    -   Highlighted May-September as potential hazard months

    -   Plotted daily values to see seasonal variations

-   Paid special attention to PM2.5, NO2, and O3 (ozone)

## Question 2 Contd

```{r, fig.width=8}

#KIANNA's FIRST GRAPH


ggplot(avgAll,aes(x =month, y = avg_co, fill=year)) +
  geom_col(width=.7, show.legend = FALSE)+
  scale_fill_manual(values =c("#33302E", "#320a5e", "#781c6d", "#bc3754", "#ed6925","#fbb61a","#fcffa4"))+
 scale_x_continuous(breaks = c(1, 13, 25, 37, 49,61,73, 84), 
                    labels = c("1"="2017","13"="2018","25"="2019","37"="2020","49"="2021","61"="2022","73"="2023","84"="2024")) +
   theme_linedraw()+
  labs(title = "Concentration of Carbon Monoxide(CO) in Portland, OR",
       subtitle="From 2017 to 2024",
       x = "Year",
       y = "Average CO Concentration(ppbv)") +
  guides(color = "none") +
  theme(axis.title.y = element_text(size=10,margin=margin(r=20)), 
        axis.title.x = element_text(size=10,margin=margin(t=15))) +
  annotate("segment", 
           x = 19, xend = 19, 
           y = .75, yend = 0.3, color = "white", 
           linewidth = .5, linetype="dashed") +
  annotate("segment", x = 21, xend = 21, y = .75, yend = 0.4, color = "white", linewidth = .5, linetype="dashed") +
  annotate("segment", x = 19, xend = 21, y = .75, yend = 0.75, color = "white", linewidth = .5) +
  geom_rect(aes(xmin=10, xmax=20, ymin=.8, ymax=1 ), fill="white", alpha=0.05)+
  annotate("text", x = 15, y = .9, 
           label = "Regular Wildfire\n Season", 
           size=2)+
  geom_point(aes(x=20,y=.775), show.legend = FALSE, color="white", shape=6, size=.5)+
  
  annotate("segment", x = 67, xend = 67, y = .75, yend = 0.1, color = "white", linewidth = .5, linetype="dashed") +
  annotate("segment", x = 69, xend = 69, y = .75, yend = 0.2, color = "white", linewidth = .5, linetype="dashed") +
  annotate("segment", x = 67, xend = 69, y = .75, yend = 0.75, color = "white", linewidth = .5) +
  geom_rect(aes(xmin=68, xmax=78, ymin=.8, ymax=1 ), fill="white", alpha=0.05)+
  annotate("text", x = 73, y = .9, label = "Regular Wildfire\n Season", size=2)+
  geom_point(aes(x=68,y=.775), show.legend = FALSE, color="white", shape=6, size=.5)+
  
  annotate("segment", x = 45.5, xend = 58, y = 1.75, yend = 2, color = "pink", linewidth = .5) +
  geom_rect(aes(xmin=55, xmax=65, ymin=2, ymax=2.2 ), fill="pink", alpha=0.05)+
  annotate("text", x = 60, y = 2.1, label = "Archie Creek Fire\n(September 2020)", size=2)+
  geom_point(aes(x=45.5,y=1.75), show.legend = FALSE, color="pink", size=.5)
  
  
  
  

```
```

